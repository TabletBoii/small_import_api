{# templates/list_page.html #}
{% extends 'base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
  <section class="item-grid">
    {% set shown = permissions | selectattr(1, 'equalto', 1) | list %}

    {% if shown %}
      {% for resource_name, allowed, label, desc in shown %}
        {% set href = url_for(route_name, route_param=resource_name) if route_name
                    else url_for(resource_name) %}

        <a href="{{ href }}" class="item-card-link">
          <article class="item-card">
            <h2>{{ label }}</h2>
            <p>{{ desc }}</p>
          </article>
        </a>
      {% endfor %}
    {% else %}
      <div class="empty‑state">
        <svg class="empty‑state__icon" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="32" cy="32" r="30" fill="none" stroke="currentColor" stroke-width="4"/>
          <path d="M20 28h24M20 36h24" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
        </svg>
        <h2 class="empty‑state__title">Нет доступных ресурсов</h2>
        <p class="empty‑state__text">У вас нет доступных ресурсов. Обратитесь к администратору для получения доступа.</p>
      </div>
    {% endif %}
  </section>
{% endblock %}